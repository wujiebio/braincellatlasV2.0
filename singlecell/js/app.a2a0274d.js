(function(){"use strict";var e={472:function(e,t,o){o.r(t);const a={cache:new Map,cacheRequest(e,t,o=6e4){if(this.cache.has(e)){const o=this.cache.get(e);return Date.now()-o.timestamp>o.ttl&&(o.promise=t,o.timestamp=Date.now()),o.promise}{const a={promise:t,timestamp:Date.now(),ttl:o};this.cache.set(e,a),t.catch((()=>{this.cache.delete(e)}))}return t},invalidate(e){this.cache.delete(e)},invalidateAll(){this.cache.clear()}};t["default"]=a},2004:function(e,t,o){o.d(t,{CV:function(){return i},GU:function(){return l},JC:function(){return E},U4:function(){return S},buildDatasetPath:function(){return C},by:function(){return p},jO:function(){return D},mL:function(){return _},ol:function(){return a},vX:function(){return L},vh:function(){return y}});const a={LOCAL:"local",REMOTE:"remote"};let s=null,n=null,r=!1;async function i(){if(n)return console.log("ÈÖçÁΩÆÊ≠£Âú®Âä†ËΩΩ‰∏≠ÔºåËøîÂõûÁé∞ÊúâPromise"),n;if(s)return console.log("‰ΩøÁî®ÁºìÂ≠òÁöÑÈÖçÁΩÆ"),Promise.resolve(s);if(r){console.log("ÈÖçÁΩÆÂä†ËΩΩ‰∏≠ÔºåÁ≠âÂæÖÂÆåÊàê...");while(r&&!s)await new Promise((e=>setTimeout(e,100)));return s||Promise.reject(new Error("ÈÖçÁΩÆÂä†ËΩΩÂ§±Ë¥•"))}return r=!0,n=(async()=>{try{const e=await fetch("/Data/datasets_config.json");if(!e.ok)throw new Error(`Failed to load datasets config: ${e.status}`);const t=await e.json();if(console.log("config",t,defaultDatasets,"399999999999999"),!t.datasets||!Array.isArray(t.datasets))throw new Error("Invalid datasets config format: missing datasets array");return t.datasets=t.datasets.filter((e=>!1!==e.enabled)),defaultDatasets?t.defaultDataset=defaultDatasets:t.defaultDataset&&!t.datasets.find((e=>e.id===t.defaultDataset))?(console.warn(`ÈÖçÁΩÆÁöÑÈªòËÆ§Êï∞ÊçÆÈõÜ '${t.defaultDataset}' Âú®ÂêØÁî®ÁöÑÊï∞ÊçÆÈõÜ‰∏≠‰∏çÂ≠òÂú®`),t.defaultDataset=t.datasets.length>0?t.datasets[0].id:null,t.defaultDataset&&console.info(`Â∑≤Ëá™Âä®ËÆæÁΩÆÈªòËÆ§Êï∞ÊçÆÈõÜ‰∏∫: ${t.defaultDataset}`)):!t.defaultDataset&&t.datasets.length>0&&(t.defaultDataset=t.datasets[0].id,console.info(`ÈÖçÁΩÆÊñá‰ª∂‰∏≠Êú™ÊåáÂÆödefaultDatasetÔºåËá™Âä®ËÆæÁΩÆ‰∏∫Á¨¨‰∏Ä‰∏™Êï∞ÊçÆÈõÜ: ${t.defaultDataset}`)),s=t,console.log("Êï∞ÊçÆÈõÜÈÖçÁΩÆÂä†ËΩΩÊàêÂäü:",t),t}catch(e){console.error("Âä†ËΩΩÊï∞ÊçÆÈõÜÈÖçÁΩÆÂ§±Ë¥•:",e);const t={datasets:[{id:"Tumour",name:"Tumour",displayName:"Tumour scRNAseq",description:"Main single cell RNA-seq dataset",basePath:"/Tumour",enabled:!0,defaultVisualization:"umap",supportedVisualizations:["tsne","umap","pca"]},{id:"mouse",name:"mouse",displayName:"Mouse scRNAseq",description:"Alternative single cell RNA-seq dataset",basePath:"/mouse",enabled:!0,defaultVisualization:"umap",supportedVisualizations:["tsne","umap","pca"]}],defaultDataset:"Tumour",config:{loadTimeout:3e4,cacheTTL:3e5,retryAttempts:3,autoDetectCellCount:!0}};return console.warn("‰ΩøÁî®ÂõûÈÄÄÈÖçÁΩÆÔºåÈªòËÆ§Êï∞ÊçÆÈõÜËÆæÁΩÆ‰∏∫:",t.defaultDataset),s=t,t}finally{r=!1,n=null}})(),n}function l(){return s}function c(){if(!s)return{SINGLE_OUTPUTS:"single_outputs",SINGLE_OUTPUTS1:"single_outputs1"};const e={};return s.datasets.forEach((t=>{const o=t.id.toUpperCase();e[o]=t.id})),e}let u={SINGLE_OUTPUTS:"single_outputs",SINGLE_OUTPUTS1:"single_outputs1",SINGLE_OUTPUTS_QUADTREE_ORDER:"single_outputs_quadtree_order",SINGLE_OUTPUTS_ORIGINAL_ORDER:"single_outputs_original_order"},d=a.LOCAL,f=null,g=!1;const m=new Map;function p(e,t){if(m.has(e))return console.log(`APIËØ∑Ê±ÇÂéªÈáç: ${e}`),m.get(e);const o=t().finally((()=>{m.delete(e)}));return m.set(e,o),o}function E(){return g}function h(e){g=e,console.log("Êï∞ÊçÆÈõÜÂàáÊç¢Áä∂ÊÄÅ: "+(e?"ËøõË°å‰∏≠":"ÂÆåÊàê"))}function _(e){Object.values(a).includes(e)?(d=e,console.log(`Êï∞ÊçÆÊ∫êÂ∑≤ÂàáÊç¢‰∏∫: ${e}`)):console.error("Êó†ÊïàÁöÑÊï∞ÊçÆÊ∫êÁ±ªÂûã")}function S(){return d}function T(e){return s&&s.datasets?s.datasets.some((t=>t.id===e)):Object.values(u).includes(e)}function v(e){return s&&s.datasets&&s.datasets.find((t=>t.id===e))||null}function L(e){if(T(e)){const t=f;f=e,console.log(`Êï∞ÊçÆÈõÜÂ∑≤ÂàáÊç¢‰∏∫: ${e}`),t!==e&&(console.log("Êï∞ÊçÆÈõÜÂàáÊç¢ÔºåÊ∏ÖÈô§Áõ∏ÂÖ≥ÁºìÂ≠ò..."),h(!0),Promise.resolve().then(o.bind(o,472)).then((({default:e})=>{e.invalidate("fields_info"),e.invalidate("cell_type_values"),e.invalidate("gene_list"),console.log("ÁºìÂ≠òÊ∏ÖÈô§ÂÆåÊàê"),setTimeout((()=>{h(!1)}),2e3)})).catch((e=>{console.warn("Ê∏ÖÈô§ÁºìÂ≠òÊó∂Âá∫Èîô:",e),h(!1)}))),"undefined"!==typeof window&&window.dispatchEvent(new CustomEvent("datasetChanged",{detail:{dataset:e,oldDataset:t}}))}else console.error("Êó†ÊïàÁöÑÊï∞ÊçÆÈõÜÁ±ªÂûã:",e)}function y(){return console.log("currentDataset",f),!f&&s&&(f=s.defaultDataset,!f&&s.datasets&&s.datasets.length>0&&(f=s.datasets[0].id)),f}async function D(){try{console.log("ÂºÄÂßãÂä†ËΩΩÊï∞ÊçÆÈõÜÈÖçÁΩÆ...");const e=await i();console.log("ÈÖçÁΩÆÂä†ËΩΩÁªìÊûú:",{hasConfig:!!e,defaultDataset:e?.defaultDataset,datasetsCount:e?.datasets?.length||0,datasets:e?.datasets?.map((e=>e.id))||[]});const t=c();Object.assign(u,t),f||(f=e.defaultDataset,console.log("‰ªéÈÖçÁΩÆËÆæÁΩÆÈªòËÆ§Êï∞ÊçÆÈõÜ:",f),!f&&e.datasets&&e.datasets.length>0&&(f=e.datasets[0].id,console.warn("ÈÖçÁΩÆÊñá‰ª∂‰∏≠Êú™ÊåáÂÆödefaultDatasetÔºå‰ΩøÁî®Á¨¨‰∏Ä‰∏™Êï∞ÊçÆÈõÜ:",f))),console.log("Êï∞ÊçÆÈõÜÈÖçÁΩÆÂàùÂßãÂåñÂÆåÊàêÔºåÂΩìÂâçÊï∞ÊçÆÈõÜ:",f),f||(console.error("Ë≠¶ÂëäÔºöcurrentDataset‰ªç‰∏∫nullÔºåÂº∫Âà∂ËÆæÁΩÆ‰∏∫Tumour"),f="Tumour")}catch(e){console.error("Êï∞ÊçÆÈõÜÈÖçÁΩÆÂàùÂßãÂåñÂ§±Ë¥•:",e),console.log("datasetsConfigÁä∂ÊÄÅ:",{hasConfig:!!s,defaultDataset:s?.defaultDataset,datasetsCount:s?.datasets?.length||0}),s&&s.defaultDataset?(f=s.defaultDataset,console.log("‰ªéÂõûÈÄÄÈÖçÁΩÆËÆæÁΩÆÈªòËÆ§Êï∞ÊçÆÈõÜ:",f)):s&&s.datasets&&s.datasets.length>0?(f=s.datasets[0].id,console.log("‰ªéÂõûÈÄÄÈÖçÁΩÆÁ¨¨‰∏Ä‰∏™Êï∞ÊçÆÈõÜËÆæÁΩÆ:",f)):(console.error("Êó†Ê≥ïÁ°ÆÂÆöÈªòËÆ§Êï∞ÊçÆÈõÜÔºöÊ≤°ÊúâÂèØÁî®ÁöÑÈÖçÁΩÆ‰ø°ÊÅØÔºåÂº∫Âà∂ËÆæÁΩÆ‰∏∫Tumour"),f="Tumour")}}function A(e=null){const t=e||y();if(console.log("getDatasetBasePath - dataset:",t),!t&&s){const e=s.defaultDataset||(s.datasets?.length>0?s.datasets[0].id:null);if(e)return console.warn("‰ΩøÁî®ÂõûÈÄÄÊï∞ÊçÆÈõÜ:",e),A(e)}if(!t)return console.error("Êó†Ê≥ïËé∑ÂèñÊï∞ÊçÆÈõÜÔºå‰ΩøÁî®ÈªòËÆ§ÂõûÈÄÄË∑ØÂæÑ: /Tumour"),"/Tumour";const o=v(t);return o&&o.basePath?o.basePath:`/${t}`}function C(e,t=null){if(!e)return console.error("Áõ∏ÂØπË∑ØÂæÑ‰∏çËÉΩ‰∏∫Á©∫"),"/Tumour/unknown";const o=A(t),a=`${o}/${e}`;return console.log(`buildDatasetPath: ${e} -> ${a}`),a}},2548:function(e,t,o){o.d(t,{o:function(){return n}});class a{constructor(){this.dataMap=new Map,this.listeners=new Map,this.version=0,console.log("üöÄ NonReactiveDataStore initialized - Â§ßÊï∞ÊçÆÂ∞ÜÂ≠òÂÇ®Âú®VueÂìçÂ∫îÂºèÁ≥ªÁªü‰πãÂ§ñ")}setData(e,t){const o=this.deepFreeze(t);this.dataMap.set(e,o),this.version++,console.log(`üì¶ NonReactiveDataStore.setData: ${e}, size: ${this.getDataSize(t)}, version: ${this.version}`),this.notifyListeners(e,o),this.notifyListeners("__version__",this.version)}getData(e){return this.dataMap.get(e)}hasData(e){return this.dataMap.has(e)}removeData(e){const t=this.dataMap.delete(e);t&&(this.version++,this.notifyListeners(e,null),this.notifyListeners("__version__",this.version),console.log(`üóëÔ∏è NonReactiveDataStore.removeData: ${e}, version: ${this.version}`))}clearAll(){this.dataMap.clear(),this.version++,this.notifyListeners("__version__",this.version),console.log(`üßπ NonReactiveDataStore.clearAll, version: ${this.version}`)}getVersion(){return this.version}deepFreeze(e){return null===e||"object"!==typeof e||Object.isFrozen(e)?e:(Array.isArray(e)?e.forEach(((t,o)=>{e[o]=this.deepFreeze(t)})):Object.values(e).forEach((e=>{this.deepFreeze(e)})),Object.freeze(e))}addListener(e,t){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t)}removeListener(e,t){const o=this.listeners.get(e);o&&(o.delete(t),0===o.size&&this.listeners.delete(e))}notifyListeners(e,t){const o=this.listeners.get(e);o&&o.forEach((o=>{try{o(t,e)}catch(a){console.error(`ÁõëÂê¨Âô®ÊâßË°åÈîôËØØ [${e}]:`,a)}}))}getDataSize(e){return Array.isArray(e)?`Array[${e.length}]`:e&&"object"===typeof e?`Object{${Object.keys(e).length} keys}`:typeof e}getStats(){const e={totalKeys:this.dataMap.size,version:this.version,keys:Array.from(this.dataMap.keys()),sizes:{}};return this.dataMap.forEach(((t,o)=>{e.sizes[o]=this.getDataSize(t)})),e}}const s=new a;t.A=s;const n={data(){return{nonReactiveDataVersion:s.getVersion()}},created(){this.$nonReactiveData=s,this._versionUpdateHandler=()=>{this.nonReactiveDataVersion=s.getVersion()},s.addListener("__version__",this._versionUpdateHandler)},beforeDestroy(){this._versionUpdateHandler&&s.removeListener("__version__",this._versionUpdateHandler)},methods:{getNonReactiveData(e){this.nonReactiveDataVersion;const t=s.getData(e);return"geneExp"===e&&console.log(`üîç getNonReactiveData(${e}):`,{version:this.nonReactiveDataVersion,hasData:!!t,geneCount:t?Object.keys(t).length:0,genes:t?Object.keys(t):[]}),t},setNonReactiveData(e,t){s.setData(e,t)},watchNonReactiveData(e,t){s.addListener(e,t),this.$once("hook:beforeDestroy",(()=>{s.removeListener(e,t)}))}}}},8661:function(e,t,o){o.d(t,{lu:function(){return l}});var a=o(4373);const s=a.A.create({baseURL:"/",timeout:3e4,headers:{"Content-Type":"application/json"}});s.interceptors.request.use((e=>e),(e=>(console.error("ËØ∑Ê±ÇÈîôËØØ:",e),Promise.reject(e)))),s.interceptors.response.use((e=>e.data),(e=>{if(console.error("ÂìçÂ∫îÈîôËØØ:",e),e.response)switch(e.response.status){case 404:console.error("ËØ∑Ê±ÇÁöÑËµÑÊ∫ê‰∏çÂ≠òÂú®");break;case 500:console.error("ÊúçÂä°Âô®ÂÜÖÈÉ®ÈîôËØØ");break;default:console.error(`ËØ∑Ê±ÇÂ§±Ë¥•: ${e.response.status}`)}else e.request?console.error("Ê≤°ÊúâÊî∂Âà∞ÂìçÂ∫î"):console.error("ËØ∑Ê±ÇÈÖçÁΩÆÈîôËØØ");return Promise.reject(e)}));var n=o(2004);const r={getFieldsInfo:()=>{const e=(0,n.vh)(),t=`fields_info_${e}`;return(0,n.by)(t,(()=>(0,n.U4)()===n.ol.LOCAL?s.get((0,n.buildDatasetPath)("fields_info.json")):s.get("/api/single-cell/fields-info")))},getCellTypeValues:()=>{const e=(0,n.vh)(),t=`cell_type_values_${e}`;return(0,n.by)(t,(()=>(0,n.U4)()===n.ol.LOCAL?s.get((0,n.buildDatasetPath)("cell_type_values.json")):s.get("/api/single-cell/cell-type-values")))},getGeneExpression:e=>{const t=(0,n.vh)(),o=`gene_expression_${t}_${e}`;return(0,n.by)(o,(()=>(0,n.U4)()===n.ol.LOCAL?s.get(`/gene_expressions/${e}.json`):s.get(`/api/single-cell/gene-expression/${e}`)))},getDatasetSummary:()=>(0,n.U4)()===n.ol.LOCAL?s.get("/multiple_outputs/dataset_summary.json"):s.get("/api/single-cell/dataset-summary"),getCellData:(e={page:1,limit:5e3})=>(0,n.U4)()===n.ol.LOCAL?s.get("/cell_data.json",{params:e}):s.get("/api/single-cell/cell-data",{params:e})};var i=o(472);const l={getFieldsInfo:()=>{const e="fields_info";return i["default"].cacheRequest(e,r.getFieldsInfo())},getCellTypeValues:()=>{const e="cell_type_values";return i["default"].cacheRequest(e,r.getCellTypeValues())},getGeneExpression:e=>{const t=`gene_exp_${e}`;return i["default"].cacheRequest(t,r.getGeneExpression(e))},getDatasetSummary:()=>{const e="dataset_summary";return i["default"].cacheRequest(e,r.getDatasetSummary())},getCellData:e=>{const t=`cell_data_page_${e.page}_limit_${e.limit}`;return i["default"].cacheRequest(t,r.getCellData(e))}}},9620:function(e,t,o){var a=o(6848),s=function(){var e=this,t=e._self._c;return t("v-app",[t("v-overlay",{attrs:{value:e.isLoading,absolute:""}},[t("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1),t("v-snackbar",{attrs:{timeout:5e3,color:"error",top:""},scopedSlots:e._u([{key:"action",fn:function({attrs:o}){return[t("v-btn",e._b({attrs:{text:""},on:{click:e.clearError}},"v-btn",o,!1),[e._v(" ÂÖ≥Èó≠ ")])]}}]),model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[e._v(" "+e._s(e.errorMessage)+" ")]),t("v-main",[t("router-view")],1)],1)},n=[],r=o(3518),i={data:()=>({showError:!1}),computed:{...(0,r.aH)({errorMessage:e=>e.error}),...(0,r.L8)(["isLoading","hasError"])},watch:{hasError(e){this.showError=e}},methods:{...(0,r.i0)(["clearError"])},created(){window.addEventListener("error",(e=>{this.$store.dispatch("setError",`Á≥ªÁªüÈîôËØØ: ${e.message}`)}))}},l=i,c=o(1656),u=(0,c.A)(l,s,n,!1,null,null,null),d=u.exports,f=o(6178),g=o(8661),m=o(2004),p=o(2548);"undefined"!==typeof window&&window.addEventListener("datasetChanged",(e=>{console.log("Store: Ê£ÄÊµãÂà∞Êï∞ÊçÆÈõÜÂàáÊç¢‰∫ã‰ª∂:",e.detail.dataset)}));var E={namespaced:!0,state:{typeInfo:{},classInfo:{},hoverInfo:{},colorField:"",datasetList:["single"],field:[],total:0,dataRange:{},geneList:[],datasetName:"",geneExpRange:{},dataVersion:0,isLoadingFieldsInfo:!1,isLoadingCellTypeValues:!1},getters:{getCellInfoList:e=>(e.dataVersion,p.A.getData("cellInfoList")||[]),getFieldValue:e=>(e.dataVersion,p.A.getData("fieldValue")||{}),getGeneExp:e=>(e.dataVersion,p.A.getData("geneExp")||{}),getTypeInfo:e=>e.typeInfo,getColorField:e=>e.colorField,getDatasetList:e=>e.datasetList,getFieldInfo:e=>e.field,getDataRange:e=>e.dataRange,getDatasetName:e=>e.datasetName,getTotal:e=>e.total},mutations:{SET_CELL_INFO(e,t){console.log("üîÑ SET_CELL_INFO: Â≠òÂÇ®Âà∞nonReactiveDataStoreÔºåÊï∞ÊçÆÂ§ßÂ∞è:",Array.isArray(t)?t.length:"N/A"),p.A.setData("cellInfoList",t),e.dataVersion++},SET_FIELD_VALUE(e,t){console.log("üîÑ SET_FIELD_VALUE: Â≠òÂÇ®Âà∞nonReactiveDataStoreÔºåÂ≠óÊÆµÊï∞Èáè:",Object.keys(t||{}).length),p.A.setData("fieldValue",t),e.dataVersion++},SET_GENE_EXP(e,t){console.log("üîÑ SET_GENE_EXP: Â≠òÂÇ®Âà∞nonReactiveDataStoreÔºåÂü∫Âõ†Êï∞Èáè:",Object.keys(t||{}).length),p.A.setData("geneExp",t),e.dataVersion++},SET_TYPE_INFO(e,t){e.typeInfo=t},SET_CLASS_INFO(e,t){e.classInfo=t},SET_HOVER_INFO(e,t){e.hoverInfo=t},SET_COLOR_FIELD(e,t){e.colorField=t},SET_DATASET_LIST(e,t){e.datasetList=t},SET_FIELD(e,t){e.field=t},SET_TOTAL(e,t){e.total=t},SET_DATA_RANGE(e,t){e.dataRange=t},SET_GENE_LIST(e,t){e.geneList=t},SET_DATASET_NAME(e,t){e.datasetName=t},SET_GENE_EXP_RANGE(e,t){e.geneExpRange=t},CLEAR_NON_REACTIVE_DATA(e){console.log("üßπ Ê∏ÖÁêÜnonReactiveDataStore‰∏≠ÁöÑÂ§ßÊï∞ÊçÆ"),p.A.clearAll(),e.dataVersion++},SET_LOADING_FIELDS_INFO(e,t){e.isLoadingFieldsInfo=t},SET_LOADING_CELL_TYPE_VALUES(e,t){e.isLoadingCellTypeValues=t}},actions:{async loadFieldsInfo({commit:e,dispatch:t,state:o}){if(o.isLoadingFieldsInfo)console.log("Â≠óÊÆµ‰ø°ÊÅØÊ≠£Âú®Âä†ËΩΩ‰∏≠ÔºåË∑≥ËøáÈáçÂ§çËØ∑Ê±Ç");else try{e("SET_LOADING_FIELDS_INFO",!0),t("setLoading",!0,{root:!0});const o=await g.lu.getFieldsInfo();e("SET_FIELD",o.fields),e("SET_TOTAL",o.total),e("SET_DATASET_NAME",o.h5ad_filename.split(".")[0]),e("SET_DATA_RANGE",{min_x:o.bounds[0],max_x:o.bounds[2],min_y:o.bounds[1],max_y:o.bounds[3]}),o.fields.length>0&&e("SET_COLOR_FIELD",o.fields[0]),t("setLoading",!1,{root:!0})}catch(a){console.error("Âä†ËΩΩÂ≠óÊÆµ‰ø°ÊÅØÂ§±Ë¥•:",a),(0,m.JC)()?console.log("Êï∞ÊçÆÈõÜÂàáÊç¢ÊúüÈó¥ÁöÑÈîôËØØÂ∑≤Ë¢´ÊäëÂà∂:",a.message):t("setError","Âä†ËΩΩÊï∞ÊçÆÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•ÂêéÈáçËØï",{root:!0}),t("setLoading",!1,{root:!0})}finally{e("SET_LOADING_FIELDS_INFO",!1)}},async loadCellTypeValues({commit:e,dispatch:t,state:o}){if(o.isLoadingCellTypeValues)console.log("ÁªÜËÉûÁ±ªÂûãÂÄºÊ≠£Âú®Âä†ËΩΩ‰∏≠ÔºåË∑≥ËøáÈáçÂ§çËØ∑Ê±Ç");else try{e("SET_LOADING_CELL_TYPE_VALUES",!0),t("setLoading",!0,{root:!0});const a=await g.lu.getCellTypeValues();e("SET_FIELD_VALUE",a),await t("processCellInfoList",{fields:o.field,values:a}),t("setLoading",!1,{root:!0})}catch(a){console.error("Âä†ËΩΩÁªÜËÉûÁ±ªÂûãÂÄºÂ§±Ë¥•:",a),(0,m.JC)()?console.log("Êï∞ÊçÆÈõÜÂàáÊç¢ÊúüÈó¥ÁöÑÈîôËØØÂ∑≤Ë¢´ÊäëÂà∂:",a.message):t("setError","Âä†ËΩΩÁªÜËÉûÁ±ªÂûãÊï∞ÊçÆÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•ÂêéÈáçËØï",{root:!0}),t("setLoading",!1,{root:!0})}finally{e("SET_LOADING_CELL_TYPE_VALUES",!1)}},async loadGeneList({commit:e,dispatch:t}){try{t("setLoading",!0,{root:!0});const{buildDatasetPath:a}=await Promise.resolve().then(o.bind(o,2004)),s=await fetch(a("gene_list.json"));if(!s.ok)throw new Error(`Âä†ËΩΩÂü∫Âõ†ÂàóË°®Â§±Ë¥•: ${s.status} ${s.statusText}`);const n=await s.json(),r=n.map((e=>({label:e,value:e})));return e("SET_GENE_LIST",r),t("setLoading",!1,{root:!0}),r}catch(a){return console.error("Âä†ËΩΩÂü∫Âõ†ÂàóË°®Â§±Ë¥•:",a),(0,m.JC)()?console.log("Êï∞ÊçÆÈõÜÂàáÊç¢ÊúüÈó¥ÁöÑÈîôËØØÂ∑≤Ë¢´ÊäëÂà∂:",a.message):t("setError","Âä†ËΩΩÂü∫Âõ†ÂàóË°®Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•ÂêéÈáçËØï",{root:!0}),t("setLoading",!1,{root:!0}),[]}},processCellInfoList({commit:e,state:t},{fields:o,values:a}){const s=["x","y","Siletti_modf_SCANVI_L1","Siletti_modf_SCANVI_L2","region","subregion"],n=o.filter((e=>!s.includes(e)));let r=[];if(o.includes("Siletti_modf_SCANVI_L1")&&o.includes("Siletti_modf_SCANVI_L2")){const e={name:"Class",children:[]},t=a["Siletti_modf_SCANVI_L1"],o=t.map((e=>{const t={id:e,name:e,children:[]},o=a["Siletti_modf_SCANVI_L2"],s=o.filter((t=>t.includes(e+"-"))).map((e=>({id:e,name:e,parent:t.id})));return t.children=s,t}));e.children=o,r.push(e)}console.log(o,a,86);for(const i of n)if("Class"!==i){const e={name:i,children:[]};a[i]&&Array.isArray(a[i])&&(e.children=a[i].map((e=>({id:e,name:e})))),r.push(e)}e("SET_CELL_INFO",r)},async loadGeneExpression({commit:e,dispatch:t,state:o},a){try{t("setLoading",!0,{root:!0});const s=await g.lu.getGeneExpression(a),n=p.A.getData("geneExp")||{};return e("SET_GENE_EXP",{...n,[a]:s.values}),e("SET_GENE_EXP_RANGE",{...o.geneExpRange,[a]:{min:s.min,max:s.max}}),t("setLoading",!1,{root:!0}),s}catch(s){return console.error(`Âä†ËΩΩÂü∫Âõ†${a}Ë°®ËææÊï∞ÊçÆÂ§±Ë¥•:`,s),t("setError",`Âä†ËΩΩÂü∫Âõ†${a}Ë°®ËææÊï∞ÊçÆÂ§±Ë¥•`,{root:!0}),t("setLoading",!1,{root:!0}),null}},setTypeInfo({commit:e},t){e("SET_TYPE_INFO",t)},setColorField({commit:e},t){e("SET_COLOR_FIELD",t)},setHoverInfo({commit:e},t){e("SET_HOVER_INFO",t)},clearHoverInfo({commit:e}){e("SET_HOVER_INFO",{})},switchDataSource({dispatch:e,commit:t},o){(0,m.mL)(o),t("CLEAR_NON_REACTIVE_DATA"),e("loadFieldsInfo"),t("SET_GENE_EXP",{}),t("SET_GENE_EXP_RANGE",{})}}},h={namespaced:!0,state:{drawer:!1,selectedItem:null,operateActive:1,selectedTypes:[],gridClass:"",selectNodes:[],currentRangeSelected:[],filterNum:0,typeClass:[],typeItem:[],typeValue:[],operatorType:[]},getters:{isDrawerOpen:e=>e.drawer,getSelectedItem:e=>e.selectedItem,getOperateActive:e=>e.operateActive,getSelectedTypes:e=>e.selectedTypes,getGridClass:e=>e.gridClass,getSelectNodes:e=>e.selectNodes,getCurrentRangeSelected:e=>e.currentRangeSelected,getFilterNum:e=>e.filterNum},mutations:{SET_DRAWER(e,t){e.drawer=t},SET_SELECTED_ITEM(e,t){e.selectedItem=t},SET_OPERATE_ACTIVE(e,t){e.operateActive=t},SET_SELECTED_TYPES(e,t){e.selectedTypes=t},ADD_SELECTED_TYPE(e,t){e.selectedTypes.includes(t)||e.selectedTypes.push(t)},REMOVE_SELECTED_TYPE(e,t){e.selectedTypes=e.selectedTypes.filter((e=>e!==t))},CLEAR_SELECTED_TYPES(e){e.selectedTypes=[]},SET_GRID_CLASS(e,t){e.gridClass=t},SET_SELECT_NODES(e,t){e.selectNodes=t},SET_CURRENT_RANGE_SELECTED(e,t){e.currentRangeSelected=t},SET_FILTER_NUM(e,t){e.filterNum=t},SET_FILTER_DATA(e,{typeClass:t,typeItem:o,typeValue:a,operatorType:s,filterNum:n}){e.typeClass=t||[],e.typeItem=o||[],e.typeValue=a||[],e.operatorType=s||[],e.filterNum=n||0}},actions:{toggleDrawer({commit:e,state:t}){e("SET_DRAWER",!t.drawer)},openDrawer({commit:e}){e("SET_DRAWER",!0)},closeDrawer({commit:e}){e("SET_DRAWER",!1)},setSelectedItem({commit:e},t){e("SET_SELECTED_ITEM",t)},setOperateActive({commit:e},t){e("SET_OPERATE_ACTIVE",t)},updateGridClass({commit:e,rootState:t}){const o=t.cellData.datasetList.length;let a="";2===o?a="grid-2":3===o?a="grid-3":4===o&&(a="grid-4"),e("SET_GRID_CLASS",a)},setSelectNodes({commit:e},t){e("SET_SELECT_NODES",t)},setCurrentRangeSelected({commit:e},t){e("SET_CURRENT_RANGE_SELECTED",t)},setFilterNum({commit:e},t){e("SET_FILTER_NUM",t)},addSelectedType({commit:e},t){e("ADD_SELECTED_TYPE",t)},removeSelectedType({commit:e},t){e("REMOVE_SELECTED_TYPE",t)},clearSelectedTypes({commit:e}){e("CLEAR_SELECTED_TYPES")}}};a["default"].use(r.Ay);var _=new r.Ay.Store({state:{loading:!1,error:null},getters:{isLoading:e=>e.loading,hasError:e=>!!e.error,errorMessage:e=>e.error},mutations:{SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t},CLEAR_ERROR(e){e.error=null}},actions:{setLoading({commit:e},t){e("SET_LOADING",t)},setError({commit:e},t){e("SET_ERROR",t)},clearError({commit:e}){e("CLEAR_ERROR")}},modules:{cellData:E,uiState:h}});a["default"].use(f.Ay);const S=()=>o.e(962).then(o.bind(o,1579)),T=[{path:"/",name:"home",component:S}],v=new f.Ay({mode:"hash",base:"./",routes:T,scrollBehavior(){return{x:0,y:0}}});v.beforeEach(((e,t,o)=>{_.dispatch("setLoading",!0),o()})),v.afterEach((()=>{setTimeout((()=>{_.dispatch("setLoading",!1)}),200)}));var L=v,y=o(3691),D=o.n(y);o(4301);a["default"].use(D());const A={};var C=new(D())(A),N=o(8626),R=o.n(N),w=o(9143),I=o.n(w),O=o(4373);function b(){return performance&&performance.memory?{usedJSHeapSize:Math.round(performance.memory.usedJSHeapSize/1024/1024),totalJSHeapSize:Math.round(performance.memory.totalJSHeapSize/1024/1024),jsHeapSizeLimit:Math.round(performance.memory.jsHeapSizeLimit/1024/1024),timestamp:Date.now()}:{usedJSHeapSize:"N/A",totalJSHeapSize:"N/A",jsHeapSizeLimit:"N/A",timestamp:Date.now()}}function V(e){const t=b();return console.log(`üîç ÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµ [${e}]:`,{"Â∑≤‰ΩøÁî®":`${t.usedJSHeapSize} MB`,"ÊÄªÂàÜÈÖç":`${t.totalJSHeapSize} MB`,"ÈôêÂà∂":`${t.jsHeapSizeLimit} MB`,"‰ΩøÁî®Áéá":"N/A"!==t.usedJSHeapSize?`${Math.round(t.usedJSHeapSize/t.jsHeapSizeLimit*100)}%`:"N/A"}),t}class ${constructor(){this.records=[],this.isMonitoring=!1,this.intervalId=null}start(e=5e3){this.isMonitoring?console.warn("ÂÜÖÂ≠òÁõëÊéßÂ∑≤Âú®ËøêË°å‰∏≠"):(this.isMonitoring=!0,console.log("üöÄ ÂºÄÂßãÂÜÖÂ≠òÁõëÊéßÔºåÈó¥Èöî:",e,"ms"),this.record("ÁõëÊéßÂºÄÂßã"),this.intervalId=setInterval((()=>{this.record("ÂÆöÊúüÊ£ÄÊü•")}),e))}stop(){this.isMonitoring?(this.isMonitoring=!1,this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),console.log("üõë ÂÜÖÂ≠òÁõëÊéßÂ∑≤ÂÅúÊ≠¢"),this.showSummary()):console.warn("ÂÜÖÂ≠òÁõëÊéßÊú™ËøêË°å")}record(e){const t=b(),o={label:e,...t,time:(new Date).toLocaleTimeString()};return this.records.push(o),"N/A"!==t.usedJSHeapSize&&t.usedJSHeapSize>1e3&&console.warn(`‚ö†Ô∏è ÂÜÖÂ≠ò‰ΩøÁî®ËøáÈ´ò [${e}]: ${t.usedJSHeapSize} MB`),o}showSummary(){if(0===this.records.length)return void console.log("üìä ÊöÇÊó†ÂÜÖÂ≠òÁõëÊéßËÆ∞ÂΩï");const e=this.records.filter((e=>"N/A"!==e.usedJSHeapSize));if(0===e.length)return void console.log("üìä ÊµèËßàÂô®‰∏çÊîØÊåÅÂÜÖÂ≠òÁõëÊéß");const t=Math.max(...e.map((e=>e.usedJSHeapSize))),o=Math.min(...e.map((e=>e.usedJSHeapSize))),a=Math.round(e.reduce(((e,t)=>e+t.usedJSHeapSize),0)/e.length);console.log("üìä ÂÜÖÂ≠òÁõëÊéßÊëòË¶Å:",{"ÊÄªËÆ∞ÂΩïÊï∞":this.records.length,"ÊúâÊïàËÆ∞ÂΩïÊï∞":e.length,"ÊúÄÂ§ßÂÜÖÂ≠ò":`${t} MB`,"ÊúÄÂ∞èÂÜÖÂ≠ò":`${o} MB`,"Âπ≥ÂùáÂÜÖÂ≠ò":`${a} MB`,"ÂÜÖÂ≠òÊ≥¢Âä®":t-o+" MB"});const s=this.records.slice(-10);console.table(s.map((e=>({"Êó∂Èó¥":e.time,"Ê†áÁ≠æ":e.label,"Â∑≤‰ΩøÁî®":`${e.usedJSHeapSize} MB`,"ÊÄªÂàÜÈÖç":`${e.totalJSHeapSize} MB`}))))}getRecords(){return[...this.records]}clearRecords(){this.records=[],console.log("üßπ ÂÜÖÂ≠òÁõëÊéßËÆ∞ÂΩïÂ∑≤Ê∏ÖÁ©∫")}}new $;async function F(){try{V("Â∫îÁî®ÂêØÂä®Ââç"),console.log("ÂºÄÂßãÂàùÂßãÂåñÊï∞ÊçÆÈõÜÈÖçÁΩÆ..."),await(0,m.jO)(),console.log("ÂÖ®Â±ÄÊï∞ÊçÆÈõÜÈÖçÁΩÆÂàùÂßãÂåñÂÆåÊàê"),V("ÈÖçÁΩÆÂä†ËΩΩÂêé");new a["default"]({router:L,store:_,vuetify:C,render:e=>e(d)}).$mount("#app");V("VueÂ∫îÁî®ÂêØÂä®Âêé")}catch(e){console.error("ÂÖ®Â±ÄÊï∞ÊçÆÈõÜÈÖçÁΩÆÂàùÂßãÂåñÂ§±Ë¥•:",e),console.warn("‰ΩøÁî®ÂõûÈÄÄÈÖçÁΩÆÂêØÂä®Â∫îÁî®..."),new a["default"]({router:L,store:_,vuetify:C,render:e=>e(d)}).$mount("#app")}}(0,m.mL)(m.ol.LOCAL),a["default"].prototype.$axios=O.A,window.axios=O.A,a["default"].use(I()),a["default"].prototype._=R(),window._=R(),a["default"].config.productionTip=!1,window.addEventListener("error",(e=>{if(e.message&&e.message.includes("ResizeObserver loop completed with undelivered notifications"))return console.warn("ÊçïËé∑Âà∞ResizeObserverÂæ™ÁéØÈîôËØØÔºåÂ∑≤ÂøΩÁï•:",e.message),e.preventDefault(),!1})),window.addEventListener("unhandledrejection",(e=>{if(e.reason&&e.reason.message&&e.reason.message.includes("ResizeObserver loop"))return console.warn("ÊçïËé∑Âà∞ResizeObserver PromiseÈîôËØØÔºåÂ∑≤ÂøΩÁï•:",e.reason.message),e.preventDefault(),!1})),F()}},t={};function o(a){var s=t[a];if(void 0!==s)return s.exports;var n=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=e,function(){o.amdO={}}(),function(){var e=[];o.O=function(t,a,s,n){if(!a){var r=1/0;for(u=0;u<e.length;u++){a=e[u][0],s=e[u][1],n=e[u][2];for(var i=!0,l=0;l<a.length;l++)(!1&n||r>=n)&&Object.keys(o.O).every((function(e){return o.O[e](a[l])}))?a.splice(l--,1):(i=!1,n<r&&(r=n));if(i){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[a,s,n]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,a){return o.f[a](e,t),t}),[]))}}(),function(){o.u=function(e){return"js/home.1d6778df.js"}}(),function(){o.miniCssF=function(e){return"css/home.a48f75ae.css"}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="single_cell_vis:";o.l=function(a,s,n,r){if(e[a])e[a].push(s);else{var i,l;if(void 0!==n)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==a||d.getAttribute("data-webpack")==t+n){i=d;break}}i||(l=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,o.nc&&i.setAttribute("nonce",o.nc),i.setAttribute("data-webpack",t+n),i.src=a),e[a]=[s];var f=function(t,o){i.onerror=i.onload=null,clearTimeout(g);var s=e[a];if(delete e[a],i.parentNode&&i.parentNode.removeChild(i),s&&s.forEach((function(e){return e(o)})),t)return t(o)},g=setTimeout(f.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=f.bind(null,i.onerror),i.onload=f.bind(null,i.onload),l&&document.head.appendChild(i)}}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){o.p=""}(),function(){if("undefined"!==typeof document){var e=function(e,t,a,s,n){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",o.nc&&(r.nonce=o.nc);var i=function(o){if(r.onerror=r.onload=null,"load"===o.type)s();else{var a=o&&o.type,i=o&&o.target&&o.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+a+": "+i+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=a,l.request=i,r.parentNode&&r.parentNode.removeChild(r),n(l)}};return r.onerror=r.onload=i,r.href=t,a?a.parentNode.insertBefore(r,a.nextSibling):document.head.appendChild(r),r},t=function(e,t){for(var o=document.getElementsByTagName("link"),a=0;a<o.length;a++){var s=o[a],n=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(n===e||n===t))return s}var r=document.getElementsByTagName("style");for(a=0;a<r.length;a++){s=r[a],n=s.getAttribute("data-href");if(n===e||n===t)return s}},a=function(a){return new Promise((function(s,n){var r=o.miniCssF(a),i=o.p+r;if(t(r,i))return s();e(a,i,null,s,n)}))},s={524:0};o.f.miniCss=function(e,t){var o={962:1};s[e]?t.push(s[e]):0!==s[e]&&o[e]&&t.push(s[e]=a(e).then((function(){s[e]=0}),(function(t){throw delete s[e],t})))}}}(),function(){var e={524:0};o.f.j=function(t,a){var s=o.o(e,t)?e[t]:void 0;if(0!==s)if(s)a.push(s[2]);else{var n=new Promise((function(o,a){s=e[t]=[o,a]}));a.push(s[2]=n);var r=o.p+o.u(t),i=new Error,l=function(a){if(o.o(e,t)&&(s=e[t],0!==s&&(e[t]=void 0),s)){var n=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.src;i.message="Loading chunk "+t+" failed.\n("+n+": "+r+")",i.name="ChunkLoadError",i.type=n,i.request=r,s[1](i)}};o.l(r,l,"chunk-"+t,t)}},o.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,n,r=a[0],i=a[1],l=a[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(s in i)o.o(i,s)&&(o.m[s]=i[s]);if(l)var u=l(o)}for(t&&t(a);c<r.length;c++)n=r[c],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(u)},a=self["webpackChunksingle_cell_vis"]=self["webpackChunksingle_cell_vis"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[504],(function(){return o(9620)}));a=o.O(a)})();
//# sourceMappingURL=app.a2a0274d.js.map